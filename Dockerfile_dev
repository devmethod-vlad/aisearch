# Dockerfile
FROM localhost:5001/cuda-python-uv-base-dev:latest

RUN uv pip install --system --no-cache-dir \
    --index-url https://download.pytorch.org/whl/cu128 \
    torch==2.7.1 torchvision==0.22.1 torchaudio==2.7.1

WORKDIR /deps
COPY pyproject.toml ./
RUN uv pip compile pyproject.toml -o requirements.lock \
 && uv pip sync --system requirements.lock

WORKDIR /backend
ENV PYTHONPATH=/backend:${PYTHONPATH}