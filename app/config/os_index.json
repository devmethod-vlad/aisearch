{
  "index_name": "aisearch-qa",
  "id_field": "row_idx",

  "bulk": {
    "chunk_size": 2000
  },

  "settings": {
    "index": {
      "number_of_shards": 1,
      "number_of_replicas": 0
    },
    "analysis": {
      "filter": {
        "ru_stop":   { "type": "stop",   "stopwords": "_russian_" },
        "ru_stemmer":{"type": "stemmer", "language": "russian" }
      },
      "analyzer": {
        "ru_mixed": {
          "type": "custom",
          "tokenizer": "standard",
          "char_filter": ["html_strip"],
          "filter": ["lowercase", "ru_stop", "ru_stemmer"]
        }
      }
    }
  },

  "mappings": {
    "dynamic": false,
    "properties": {
      "row_idx":   { "type": "integer" },
      "source":    { "type": "keyword" },
      "ext_id":    { "type": "keyword" },
      "page_id":   { "type": "keyword" },
      "actual":    { "type": "keyword" },
      "second_line": { "type": "keyword" },
      "role":      { "type": "keyword" },
      "product":   { "type": "keyword" },
      "space":     { "type": "keyword" },
      "component": { "type": "keyword" },
      
      "question_md": {
        "type": "text",
        "analyzer": "ru_mixed",
        "fields": { "kw": { "type": "keyword", "ignore_above": 1024 } }
      },
      "question": {
        "type": "text",
        "analyzer": "ru_mixed",
        "fields": { "kw": { "type": "keyword", "ignore_above": 1024 } }
      },
      
      "analysis_md": { "type": "text", "analyzer": "ru_mixed" },
      "analysis":    { "type": "text", "analyzer": "ru_mixed" },
      
      "answer_md": { "type": "text", "analyzer": "ru_mixed" },
      "answer":    { "type": "text", "analyzer": "ru_mixed" },
      
      "for_user":  { "type": "keyword" }
    }
  }
}